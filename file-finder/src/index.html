<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="styles.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>File Finder</title>
    <script type="module" src="/main.js" defer></script>
  </head>

  <body>
    <div class="app">
      <div id="search-loading" class="search-loading hidden">
        <span class="spinner"></span> Searching files...
      </div>
      <div class="header">
        <h1>File Finder</h1>
        <div class="status">
          <span id="index-status">Initializing...</span>
          <button id="index-folder-btn" class="btn-small" style="margin-left: 10px;">Re-index</button>
        </div>
      </div>

      <div class="search-container">
        <input
          type="text"
          id="search-input"
          placeholder="Type to search files... (supports glob * ? and regex)"
          autofocus
        />
        <button id="settings-btn" class="settings-btn" title="Search Settings">‚öôÔ∏è</button>
        <button id="regex-help-btn" class="regex-help-btn" title="Regex Help">?</button>
      </div>

      <!-- Regex Help Panel -->
      <div id="regex-help-panel" class="regex-help-panel hidden">
        <div class="help-header">
          <h3>Search Patterns & Regex Guide</h3>
          <button id="close-regex-help" class="close-btn">√ó</button>
        </div>
        <div class="help-content">
          <div class="help-section">
            <h4>üîç Simple Patterns</h4>
            <div class="examples">
              <div class="example" data-pattern="config*">
                <code>config*</code> - Files starting with "config"
              </div>
              <div class="example" data-pattern="*.js">
                <code>*.js</code> - All JavaScript files
              </div>
              <div class="example" data-pattern="test*.py">
                <code>test*.py</code> - Python test files
              </div>
            </div>
          </div>

          <div class="help-section">
            <h4>‚ö° Regex Patterns</h4>
            <div class="examples">
              <div class="example" data-pattern="config\.(js|ts|json)$">
                <code>config\.(js|ts|json)$</code> - Config files (js, ts, or json)
              </div>
              <div class="example" data-pattern="/(test|spec)\..*$/">
                <code>/(test|spec)\..*$/</code> - Test or spec files
              </div>
              <div class="example" data-pattern="^[A-Z].*\.java$">
                <code>^[A-Z].*\.java$</code> - Java files starting with uppercase
              </div>
              <div class="example" data-pattern="controller|service|model">
                <code>controller|service|model</code> - Files containing these terms
              </div>
              <div class="example" data-pattern="\d{4}-\d{2}-\d{2}">
                <code>\d{4}-\d{2}-\d{2}</code> - Files with date patterns (YYYY-MM-DD)
              </div>
            </div>
          </div>

          <div class="help-section">
            <h4>üìö Common Regex Symbols</h4>
            <div class="regex-symbols">
              <div><code>^</code> - Start of string</div>
              <div><code>$</code> - End of string</div>
              <div><code>.</code> - Any character</div>
              <div><code>*</code> - Zero or more</div>
              <div><code>+</code> - One or more</div>
              <div><code>?</code> - Zero or one</div>
              <div><code>|</code> - OR operator</div>
              <div><code>[a-z]</code> - Character range</div>
              <div><code>\d</code> - Digit (0-9)</div>
              <div><code>\w</code> - Word character</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Panel -->
      <div id="settings-panel" class="settings-panel hidden">
        <h3>Search Settings</h3>
        <div class="settings-content">
          <label class="setting-item">
            <input type="checkbox" id="search-folders" checked />
            <span>Search in folder names</span>
          </label>
          <label class="setting-item">
            <input type="checkbox" id="search-fuzzy" checked />
            <span>Enable fuzzy matching</span>
          </label>
          <label class="setting-item">
            <input type="checkbox" id="search-strict" />
            <span>Strict mode (exact/prefix only)</span>
          </label>
          <label class="setting-item">
            <input type="checkbox" id="search-filename-only" />
            <span>Filename only (ignore paths)</span>
          </label>
        </div>
        
        <h3 style="margin-top: 20px; border-top: 1px solid var(--border); padding-top: 15px;">Auto Reindex</h3>
        <div class="settings-content">
          <label class="setting-item">
            <input type="checkbox" id="auto-reindex" checked />
            <span>Enable automatic nighttime reindex</span>
          </label>
          <div class="time-range-info">
            <small>Reindexes daily between 2:00 AM - 5:00 AM</small>
          </div>
        </div>
      </div>

      <div class="tabs-container">
        <div class="tabs">
          <button class="tab-btn active" data-tab="search">Search Results</button>
          <button class="tab-btn" data-tab="favorites">Favorites</button>
          <button class="tab-btn" data-tab="recent">Recent Files</button>
        </div>
      </div>

      <div class="results-container">
        <div id="search-results" class="tab-content active">
          <div class="sort-tabs">
            <button class="sort-btn active" data-sort="relevance" data-tab="search">Relevance</button>
            <button class="sort-btn" data-sort="date" data-tab="search" title="Sort by last accessed time (not file modification date)">Last Accessed</button>
            <button class="sort-btn" data-sort="usage" data-tab="search">Usage</button>
          </div>
          <div id="results-list"></div>
        </div>
        <div id="favorites-results" class="tab-content">
          <div class="sort-tabs">
            <button class="sort-btn active" data-sort="name" data-tab="favorites">Name</button>
            <button class="sort-btn" data-sort="date" data-tab="favorites" title="Sort by last accessed time (not file modification date)">Last Accessed</button>
            <button class="sort-btn" data-sort="usage" data-tab="favorites">Usage</button>
          </div>
          <div id="favorites-list"></div>
        </div>
        <div id="recent-results" class="tab-content">
          <div class="sort-tabs">
            <button class="sort-btn active" data-sort="usage" data-tab="recent">Most Used</button>
            <button class="sort-btn" data-sort="date" data-tab="recent">Most Recent</button>
          </div>
          <div id="recent-list"></div>
        </div>
      </div>

      <div class="help-text">
        <kbd>‚Üë</kbd><kbd>‚Üì</kbd> or <kbd>j</kbd><kbd>k</kbd> to navigate (when not typing) ‚Ä¢ <kbd>gg</kbd> first ‚Ä¢ <kbd>G</kbd> last ‚Ä¢ <kbd>Ctrl+d/u</kbd> half page ‚Ä¢ <kbd>Enter</kbd> to open ‚Ä¢ <kbd>F5</kbd>/<kbd>Ctrl+R</kbd> refresh ‚Ä¢ <kbd>Ctrl+Shift+D</kbd> debug ‚Ä¢ <kbd>Esc</kbd> to clear
      </div>
    </div>
  </body>
</html>
